<?php 

require "../app/conection.php";

function array_in_string($array, $string) {
    foreach ($array as $item) {
        if (strpos($string, $item) !== false) {
            return true;
        }
    }
    return false;
}

$conteo_cable = [];
$terminales = [];

$pn = isset($_GET['pn']) ? $_GET['pn'] : "621705";
$buscawo = mysqli_query($con, "SELECT * FROM listascorte WHERE pn='$pn'");
while ($rowo = mysqli_fetch_array($buscawo)) {
    $tipo = $rowo['tipo'];
    $aws = $rowo['aws'];
    $color = $rowo['color'];
    $cons = $rowo['cons'];
    $tamano = $rowo['tamano'];
    $terminal1 = $rowo['terminal1'];
    $ter1=explode(" ",$terminal1);
    $terminal1 = $ter1[0];
    $terminal2 = $rowo['terminal2'];
    $ter2=explode(" ",$terminal2);
    $terminal2 = $ter2[0];

    $nome=['AIRT2-1','APC22-4','APT1-10','APT1-11','AT2-1','AT2-3','AT2-4','AT3-38','AT4-1','AT6-1','AT6-2','AT6-3','AT6-4','BB1-22','BB4-11','BB6-14','BB6-5','BT2-1','BT2-2','BT2-3','BT3-1','CCC7661-OS','CIB15A-4','CIB15A-7','CIB20A-2','CIB25A-1','CST2-1','CST2-2','DDT2-1','DDT2-2','DDT2-3','DDT2-4','DT1-1','DT1-127','DT1-133','DT1-134','DT1-135','DT1-2','DT1-3','DT1-31','DT1-41','DT1-43','DT1-5','DT1-54','DT1-62','DT2-1','DT2-100','DT2-103','DT2-105','DT2-116','DT2-119','DT2-13','DT2-133','DT2-142','DT2-143','DT2-144','DT2-15','DT2-16','DT2-17','DT2-17','DT2-17','DT2-190','DT2-191','DT2-192','DT2-193','DT2-2','DT2-20','DT2-21','DT2-23','DT2-24','DT2-25','DT2-26','DT2-28','DT2-29','DT2-3','DT2-30','DT2-31','DT2-4','DT2-40','DT2-44','DT2-46','DT2-59','DT2-7','DT2-8','DT2-86','DT2-92','DT2-95','DT3-1','DT3-90','EC41-214','EGT3-1','EGT3-2','EPCT1-1','EPCT1-2','EPCT2-3','EPCT2-4','ET1-1','ET1-10','ET1-24','ET1-25','ET1-3','ET1-36','ET1-38','ET1-42','ET1-44','ET2-10','ET2-2','ET2-27','ET2-30','ET2-33','ET2-41','ET2-45','ET2-47','ET2-49','ET2-51','ET2-55','FAST1-41','FAST1-42','FC141-14','FC81-19','FDT1-2','FDT1-3','FDT1-4','FDT1-5','FH-29','FH-36','FT1-1','FT1-11','FT1-12','FT1-2','FT1-7','FT2-10','FT2-13','FT2-3','FT2-4','FT2-5','FT2-8','FT2-9','FT3-1','GC102-2','GNT1-1','GNT2-1','GT6-2','GT6-3','HGT1-1','HGT1-2','HGT2-1','HGT2-2','HGT2-3','HST2-1','HT2-1','JT1-1','JT2-2','JT2-4','JT2-5','JT2-6','JT2-8','KLT2-2','KLT2-3','KLT2-4','KLT2-5','KLT2-6','KLT2-7','KLT2-9','KT1-1','LCT1-1','MC314-150','MC42-1','MT1-10','MT1-108','MT1-124','MT1-148','MT1-150','MT1-155','MT1-180','MT1-3','MT1-35','MT1-38','MT1-39','MT1-57','MT1-58','MT1-60','MT1-61','MT1-7','MT1-8','MT1-88','MT1-89','MT2-10','MT2-101','MT2-102','MT2-103','MT2-106','MT2-11','MT2-110','MT2-113','MT2-12','MT2-125','MT2-136','MT2-14','MT2-148','MT2-15','MT2-150','MT2-16','MT2-17','MT2-181','MT2-194','MT2-2','MT2-21','MT2-23','MT2-27','MT2-30','MT2-33','MT2-34','MT2-36','MT2-4','MT2-40','MT2-41','MT2-45','MT2-5','MT2-50','MT2-56','MT2-560','MT2-68','MT2-69','MT2-92','MT2-96','MT2-94','MT3-10','MT3-101','MT3-11','MT3-110','MT3-111','MT3-117','MT3-12','MT3-120','MT3-126','MT3-144','MT3-31','MT3-33','MT3-48','MT3-62','MT3-63','MT3-64','MT3-65','MT3-73','MT3-83','MT3-84','MT3-88','MT3-9','MT3-91','MT4-137','MT4-152','MT4-23','MT5-127','MT5-128','MT5-145','MT5-92','NCT2-1','NPT1-1','PEIT1-2','PEIT1-3','PEIT2-1','PEIT2-2','PEIT2-3','PEIT2-4','PHC122-1','PHC122-2','PHC21-1','PHC31-1','PHC31-2','PHC32-11','PHC32-4','PHC32-9','PHC42-10','PHC51-1','PHC61-1','PHC71-1','PHC82-2','PT1-17','PT2-19','PT2-29','PT3-1','PT3-10','PT3-100','PT3-2','PT3-20','PT3-3','PT3-4','PT3-7','PT3-7','PT3-8','PT3-9','PT5-1','PW20-105','PW20-139','PW20-166','PW20-221','PW20-505','PW20-506','PW20-507','PW20-537','PW20-538','PW20-611','PW20-612','PW20-910','PW30-118','PW30-133','PW30-146','PW30-160','PW30-179','PW30-998','PW90-05','RA-10','SGC52-1','SGT2-1','SST1-1','SST1-3','SST2-2','SW2-1','TBT3-10','TBT3-12','TBT3-3','TBT3-4','TBT3-5','TBT3-6','TBT3-7','TBT3-8','TBT3-9','TC21-127','TC22-128','TC42-174','TO-102','TO-129','TO-3','TO-37','TO-4','TO-5','TOAPP-158','TOAPP-169','TOAPP-170','TOAPP-173','TOAPP-174','TOTER-160','TT1-110','TT1-120','TT1-141','TT1-160','TT1-170','TT1-207','TT1-231','TT1-249','TT1-25','TT1-258','TT1-27','TT1-286','TT1-292','TT1-305','TT1-307','TT1-31','TT1-52','TT1-55','TT1-57','TT1-58','TT1-62','TT2-1','TT2-10','TT2-104','TT2-105','TT2-106','TT2-107','TT2-114','TT2-117','TT2-119','TT2-120','TT2-121','TT2-124','TT2-125','TT2-126','TT2-127','TT2-130','TT2-132','TT2-137','TT2-146','TT2-147','TT2-15','TT2-15','TT2-159','TT2-16','TT2-163','TT2-17','TT2-182','TT2-187','TT2-2','TT2-202','TT2-211','TT2-218','TT2-22','TT2-22','TT2-236','TT2-237','TT2-242','TT2-245','TT2-255','TT2-26','TT2-261','TT2-263','TT2-264','TT2-273','TT2-276','TT2-293','TT2-297','TT2-3','TT2-303','TT2-305','TT2-306','TT2-308','TT2-309','TT2-313','TT2-314','TT2-315','TT2-316','TT2-317','TT2-32','TT2-325','TT2-34','TT2-35','TT2-39','TT2-4','TT2-40','TT2-431','TT2-45','TT2-5','TT2-50','TT2-54','TT2-56','TT2-59','TT2-61','TT2-7','TT2-8','TT2-9','TT2-97','TT3-1','TT3-10','TT3-100','TT3-107','TT3-11','TT3-115','TT3-117','TT312-83','TT3-134','TT3-139','TT3-14','TT3-14','TT3-14','TT3-14','TT3-142','TT3-143','TT314-300','TT3-144','TT3-145','TT3-148','TT3-148','TT3-149','TT3-150','TT3-151','TT3-155','TT3-156','TT3-158','TT3-161','TT3-162','TT3-164','TT3-174','TT3-175','TT3-177','TT3-183','TT3-184','TT3-187','TT3-19','TT3-191','TT3-194','TT3-199','TT3-209','TT3-216','TT3-225','TT3-244','TT3-250','TT3-251','TT3-277','TT3-283','TT3-285','TT338-289','TT338-301','TT3-4','TT3-41','TT3-43','TT3-46','TT3-48','TT3-49','TT3-50','TT3-66','TT3-67','TT3-68','TT3-69','TT3-7','TT3-70','TT3-71','TT3-72','TT3-73','TT3-75','TT3-77','TT3-78','TT3-82','TT3-84','TT3-85','TT3-86','TT3-87','TT3-88','TT3-89','TT38-99','TT3-90','TT3-91','TT3-92','TT3-93','TT3-95','TT3-96','TT4-16','TT5-197','TT5-198','TT5-290','TT5-291','VTEA3-5','WET2-1','WKT2-1','WKT4-7','WT5-1','WTK3-8','YT1-1','YT1-10','YT1-16','YT1-17','YT1-2','YT1-20','YT1-24','YT1-3','YT1-5','YT1-8','YT1-9','YT2-1','YT2-11','YT2-12','YT2-13','YT2-14','YT2-15','YT2-16','YT2-17','YT2-18','YT2-19','YT2-22','YT2-27','YT2-28','YT2-29','YT2-3','YT2-4','YT2-6','YT2-7','AT1-523','TT1-98','TT3-610','AT1-20','AT2-20','THVA4-20','TBT3-38','TT2-418','FT2-12','BB7-1','BB4-5','BB3-18 ','MT1-34','MT2-35','DT2-32','AT2-2','DT1-6','DT2-34','DT2-41','TT1-1','MT2-18','TT2-401','DT2-42','TT2-12','TT2-13','TT2-14','TT1-2','TT2-412 ','TT1-3','AT2-6','TT3-6','DLO-116','TT3-8','TT2-20','LFT1-2','MT2-24','DT1-9','DT3-2','DT3-3','ST2-2','TT3-15','DT3-4','TT3-16','TT1-4','TT2-21','TT2-23','TT2-419','MT1-5','DT2-45','DT2-47','TT2-318','MT3-8','TT1-5','TT1-7','DT2-48','DT2-53','DT2-54','MT1-1','TT2-24','DT1-10','TT2-25','TT2-27','DT1-11','TT2-28','MTAT1-1','DT2-57','TT1-8','TT2-29','TT2-30','TT5-1','TT2-31','TT2-33','TT1-9','PT3-12','PT3-56','DT2-61','VT2-1','PT6-1','PT5-2','TT3-17','MT2-57','TT2-37','MT1-9','RST3-1','TT2-42','TT2-422','TT1-10','TT2-43','TT1-11','JST3-1','ST2-3','YT2-2','YT2-5','HGT2-4','ST1-1','YT2-9','MT3-24','TT2-44','TT2-46','BT2-5','BT2-6','BT2-7','ST2-4','ST2-5','TT2-47','PT3-11','DT2-62','DT2-63','QCT3-1','QCT3-2','DT2-64','TT1-12','TT1-13','TT2-48','DT2-65','DT1-12','DT2-68','MT3-26','TT1-14','MTDT2-1','MTDT2-2','TT2-49','TC11-1','TT2-51','DT2-73','TT2-52','TT3-18','EPCT2-1','TT2-53','TT1-15','TT1-16','HGT2-6','TT2-55','TT2-57','TT2-58','TT1-17','DT1-14','TT2-60','DT2-76','DT2-77','DT2-78','YC11-3','ST2-6','YT2-20','YT2-23','TT2-62','YT2-24','YT2-63','YT2-64','ST2-7','JST3-2','JST3-3','JST3-4','DT1-17','TT2-63','TT2-64','DT2-83','TT1-18','TT2-65','TT2-70','TT2-68','TT2-69','TT1-20','TT2-66','TT5-2','TT2-67','MT3-34','TT2-71','YT2-30','YT2-31','YT2-32','PT2-4','MT3-35','TT2-72','DT1-15','DT1-16','ET2-5','NT5-1','ST2-8','YT1-6','PT5-3','TT2-73','TT2-75','TT2-74','TT1-21','TT1-22','TT2-76','DT2-85','PEIT1-1','AT1-1','DT3-5','DT3-6','TT3-30','ET1-4','MT3-36','TT1-23','PT5-4','TT2-77','LCC81-1','TT3-29','BRACKET-1','ITTT1-1','ITTT1-2','DT2-87','TT5-3','YT2-33','YT2-34','YT2-35','YT2-36','YT2-37','YT2-38','TT2-78','DT1-33','TT2-79','TT2-80','HGT2-7','MT1-11','LCT2-1','TT1-24','MT2-70','TT2-81','YT1-7','MT3-37','HGT2-8','HGT2-9','HMC51-1','YT1-18','YT1-19','FKC21-1','ST2-9','ST2-10','YT1-21','ST1-2','TT2-82','TT2-83','TT2-84','KLT2-10','KLT2-11','KLT2-12','KLT2-13','JDT2-1','MT3-39','MT3-40','AET2-1','SMT2-1','TT2-85','TT2-86','TT2-87','APT1-5','EMT3-1','DT2-88','TT2-88','SKT2-1','SKT2-2','MT3-41','DT2-81','EST2-1','TT2-89','TT2-90','AT2-7','MT3-42','AT2-8','MT2-71','PT3-35','TT2-91','TT3-31','TT3-32','TT3-34','MT2-73','AT2-9','ST3-1','ST3-2','ST3-3','ST3-4','ST3-5','ST3-6','ST3-7','MT2-74','GC62-1','HGT1-3','HGT1-5','WT6-1','WT6-2','TT2-92','TT1-26','CPT2-1','CPT2-2','WKT3-1','MT1-14','TT1-28','TT1-30','TT3-36','TT2-93','TT2-94','MT1-15','ST2-11','GHT2-1','BT2-8','BT2-9','TT2-95','TT2-96','DT2-89','DT2-90','ITTT2-1','ITTT2-2','DT2-91','TT2-99','TT2-100','TT2-109','TT1-32','DT1-18','PT3-36','TT2-110','TT2-112','FWT2-1','FWT2-2','ET1-8','TT1-33','TT3-37','BT3-2','TT2-113','LCT2-2','TT1-34','KLT2-14','MBT2-1','TT2-115','TT2-116','TT2-118','MT2-76','JYA3-2','ECIT2-1','DT2-93','DT2-102','MT3-43','ACCA2-1','ACCA4-1','ACCT3-1','ACCA2-2','ACCA4-2','TBT3-11','TT2-122','TT1-35','TT5-4','AT1-2','TT1-36','TT1-38','PHT2-2','RST3-2','MT3-44','MT3-45','TT1-39','DT1-19','ET1-9','YT2-10','MT2-77','MT1-16','PT5-7','WTT3-1','DT2-106','WTT3-2','TT3-38','YT1-22','MT3-46','MT2-78','HAT2-1','HAA4-4','THVT2-1','TT4-1','MT2-79','MT1-17','FT2-1','DT2-107','MT1-62','PT3-37','YT2-39','TT5-5','AT1-3','ET2-7','AT2-10','MT2-19','MT3-47','ET1-12','MT2-20','DT2-108','TT1-40','MB30-1','TT2-131','DT2-110','TT2-145','TT2-148','TT1-44','MT3-49','MT2-80','EST2-3','TT2-149','TT1-45','TT1-46','TT2-150','MT2-81','EST1-1','EST2-2','DT3-7','MT3-50','MT3-51','MT3-52','MT3-53','WKT3-2','EST3-1','MT3-54','MT3-55','MT3-56','WKT3-3','WKT3-4','TT1-47','TT1-48','TT2-151','TT1-49','MT3-57','MT3-58','DT1-20','ET2-11','MT3-59','EST3-2','MT1-18','MT3-60','PKCC762-1','WKT3-5','MT1-19','MT3-61','WKT3-6','DT2-113','DT2-122','DT2-123','ST2-12','ITTT1-3','TT2-152','DT2-124','DT2-125','JT2-13','TT2-142','TT2-143','TT1-41','TT2-144','MT2-22','TT1-43','JAET2-1','JAET2-2','BT2-10','MT1-20','DT2-126','ET2-13','TT2-153','TT2-154','TT2-155','TT2-156','TT2-157','FP-15','FLO-6','TT1-50','ET1-17','JT2-14','TT2-158','TT3-40','JT2-15','TT2-160','TT3-42','JT2-16','TT2-161','TT2-162','JT2-17','JT2-18','JT2-19','TT4-2','TT4-3','TT2-164','TC11-5','TT3-39','TT4-4','TT4-5','TT2-165','TT2-169','TT1-51',
    'TT2-170','TT2-171','TT1-54','TT2-172','TT2-173','TT2-174','TT2-175','TT2-176','JT2-20','TC11-6','TC11-7','TC31-13','JT2-21','TT2-177','TT1-56','TT2-179','TT3-44','TT2-181','TT2-183','TT3-45','TT2-184','TT2-185','TT2-188','TT1-61','TT1-63','TT2-189','TT2-190','TT2-191','TT2-192','TT2-193','TT2-194','TT1-64','JT2-22','TT2-197','TT2-198','TT2-199','TT3-47','YT2-40','TT2-200','TT2-205','TT2-206','TT2-207','TT2-209','TT2-210','TT2-212','TT2-213','TT2-214','TT2-216','DT1-21','DT1-22','TT2-217','TT2-223','TT2-224','DT2-127','DT2-128','DT2-129','MT4-1','TT2-225','TT1-65','MT2-25','TT4-8','TT3-51','TT2-226','ITTT1-4','TT2-229','YT2-41','DT1-23','DT1-24','APT1-6','DT2-131','DT2-132','TT3-52','TT2-231','TT2-232','KLT2-15','TT1-66','TT2-233','TT2-238','LCT1-2','FWC161-1','FWC162-1','DT3-8','DT3-9','DT2-134','DT2-141','TT3-53','DT2-145','ET2-14','DT2-146','ET1-18','KLT2-16','KLT2-17','KLT2-18','TT2-244','AT1-4','AT2-14','TT2-246','TT2-249','ST2-13','TT2-250','MT3-66','AT2-15','AT2-16','DT2-147','YT1-11','DT1-25','TT2-251','THBT2-1','MT1-23','TT1-67','TT1-68','DT1-26','DT2-148','DT2-149','TT2-253','DT2-150','DT2-151','DT2-152','TT2-269','TT2-270','YT1-12','TT2-271','TT2-274','TT2-275','TT3-54','DT2-153','DT2-154','DT2-155','TT2-277','TT2-278'];
    if ($tipo != "") {
        $recop = $tipo . "," . $aws . "," . $color;
        if (!array_key_exists($recop, $conteo_cable)) {
            $conteo_cable[$recop] = $tamano;
        } else {
            $conteo_cable[$recop] += $tamano;
        }
       
        if (array_in_string($nome, $terminal1)) {
            if (!array_key_exists($terminal1, $terminales)) {
                $terminales[$terminal1] = 1;
            } else {
                $terminales[$terminal1] += 1;
            }
        }

        if (array_in_string($nome, $terminal2)) {
            if (!array_key_exists($terminal2, $terminales)) {
                $terminales[$terminal2] = 1;
            } else {
                $terminales[$terminal2] += 1;
            }
            
        }}
        }    
    




foreach ($conteo_cable as $key => $value) {
    print($key . " " . $value . "<br>");
}
print("<br>");
foreach ($terminales as $key => $value) {
    print($key . " " . $value . "<br>");
}   
?>
